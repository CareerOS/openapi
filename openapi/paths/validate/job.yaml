post:
  tags:
    - Validate
  summary: Validate job
  description: |
    Endpoint checks if the company in which job is opened exists in the CareerOS database, and 
    that given job is not yet saved by the user for the given company.
    
    Matching rules:
     - company is checked by name and slug
     - job is checked by linkedin_url
    
    The endpoint is used exclusively by the browser extension.
  operationId: validateJob
  requestBody:
    required: true
    content:
      application/json:
        schema:
          allOf:
            - type: object
              properties:
                company:
                  $ref: ../../components/schemas/CompanySearchFields.yaml
            - type: object
              properties:
                job_linkedin_url:
                  type: string
                  description: LinkedIn URL of the job
              required:
                - job_linkedin_url
  responses:
    '200':
      description: Successful operation
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                enum:
                  - Job can be saved
    '400':
      $ref: ../../components/responses/JSONValidationFailedError.yaml
    '401':
      $ref: ../../components/responses/UnauthorizedError.yaml
    '404':
      description: User job not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                description: Job can be saved - user did not save this job previously
                enum:
                  - Job does not exist in the database
    '409':
      description: Conflict - user already saved this job
      content:
        application/json:
          schema:
            type: object
            properties:
              job_id:
                type: string
                format: uuid
                description: ID of the already saved job
    '500':
      $ref: ../../components/responses/InternalServerError.yaml
