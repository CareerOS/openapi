get:
  tags:
    - Custom Fields (BETA)
  summary: List custom field definitions
  description: |
    **[BETA]** Retrieve all custom field definitions for a specific entity type.

    Custom fields allow institutions to extend standard CareerOS entities with
    additional fields specific to their needs. Similar to Symplicity's custom fields,
    these enable institutions to collect additional data on students, jobs, applications,
    and other entities.

    **Access**: University administrators only
  operationId: listCustomFields
  security:
    - BearerAuth: []
  parameters:
    - name: entity_type
      in: query
      required: true
      description: Entity type to retrieve custom fields for
      schema:
        type: string
        enum: [student, job, company, application, event, contact, internship_agreement, employer]
      example: "student"
    - name: status
      in: query
      description: Filter by field status
      schema:
        type: string
        enum: [active, inactive, archived]
        default: active
    - name: include_values
      in: query
      description: Include picklist values for dropdown fields
      schema:
        type: boolean
        default: true
  responses:
    '200':
      description: Custom fields retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              entity_type:
                type: string
                enum: [student, job, company, application, event, contact, internship_agreement, employer]
              custom_fields:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    field_name:
                      type: string
                      example: "preferred_industry"
                    display_label:
                      type: string
                      example: "Preferred Industry"
                    field_type:
                      type: string
                      enum: [text, textarea, number, date, boolean, single_select, multi_select, url, email, phone]
                      description: |
                        - text: Single line text input
                        - textarea: Multi-line text input
                        - number: Numeric value
                        - date: Date picker
                        - boolean: Yes/No checkbox
                        - single_select: Dropdown with single selection
                        - multi_select: Dropdown with multiple selections
                        - url: URL/link field
                        - email: Email address field
                        - phone: Phone number field
                    picklist_values:
                      type: array
                      description: Available options for single_select and multi_select fields
                      items:
                        type: object
                        properties:
                          id:
                            type: string
                            format: uuid
                          value:
                            type: string
                            example: "Technology"
                          label:
                            type: string
                            example: "Technology & Software"
                          sort_order:
                            type: integer
                          is_active:
                            type: boolean
                    is_required:
                      type: boolean
                      description: Whether field is required
                    is_searchable:
                      type: boolean
                      description: Whether field can be used in search/filters
                    is_visible_to_students:
                      type: boolean
                      description: Whether students can see this field
                    is_visible_to_employers:
                      type: boolean
                      description: Whether employers can see this field
                    default_value:
                      type: string
                      description: Default value for the field
                    validation_rules:
                      type: object
                      properties:
                        min_length:
                          type: integer
                        max_length:
                          type: integer
                        pattern:
                          type: string
                          description: Regex pattern for validation
                        min_value:
                          type: number
                        max_value:
                          type: number
                    help_text:
                      type: string
                      description: Help text shown to users
                    sort_order:
                      type: integer
                      description: Display order of field
                    status:
                      type: string
                      enum: [active, inactive, archived]
                    created_at:
                      type: string
                      format: date-time
                    updated_at:
                      type: string
                      format: date-time
              total:
                type: integer
    '401':
      $ref: ../../components/responses/UnauthorizedError.yaml
    '403':
      $ref: ../../components/responses/ForbiddenError.yaml

post:
  tags:
    - Custom Fields (BETA)
  summary: Create custom field definition
  description: |
    **[BETA]** Create a new custom field definition for an entity type.

    Allows university administrators to add custom fields to collect additional
    data specific to their institution's needs.

    **Access**: University administrators only
  operationId: createCustomField
  security:
    - BearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - entity_type
            - field_name
            - display_label
            - field_type
          properties:
            entity_type:
              type: string
              enum: [student, job, company, application, event, contact, internship_agreement, employer]
              example: "student"
            field_name:
              type: string
              description: Internal field name (alphanumeric and underscores only)
              example: "preferred_industry"
              pattern: "^[a-z0-9_]+$"
            display_label:
              type: string
              example: "Preferred Industry"
            field_type:
              type: string
              enum: [text, textarea, number, date, boolean, single_select, multi_select, url, email, phone]
            picklist_values:
              type: array
              description: Required for single_select and multi_select fields
              items:
                type: object
                required:
                  - value
                  - label
                properties:
                  value:
                    type: string
                    example: "technology"
                  label:
                    type: string
                    example: "Technology & Software"
                  sort_order:
                    type: integer
            is_required:
              type: boolean
              default: false
            is_searchable:
              type: boolean
              default: true
            is_visible_to_students:
              type: boolean
              default: true
            is_visible_to_employers:
              type: boolean
              default: false
            default_value:
              type: string
            validation_rules:
              type: object
              properties:
                min_length:
                  type: integer
                max_length:
                  type: integer
                pattern:
                  type: string
                min_value:
                  type: number
                max_value:
                  type: number
            help_text:
              type: string
            sort_order:
              type: integer
  responses:
    '201':
      description: Custom field created successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              field_name:
                type: string
              display_label:
                type: string
              field_type:
                type: string
              status:
                type: string
                example: "active"
              created_at:
                type: string
                format: date-time
              message:
                type: string
                example: "Custom field created successfully"
    '400':
      $ref: ../../components/responses/ValidationError.yaml
    '401':
      $ref: ../../components/responses/UnauthorizedError.yaml
    '403':
      $ref: ../../components/responses/ForbiddenError.yaml
    '409':
      description: Field name already exists
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Duplicate field name"
              message:
                type: string
                example: "A custom field with this name already exists for this entity type"
